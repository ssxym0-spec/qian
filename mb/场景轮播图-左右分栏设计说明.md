# 场景轮播图 - 左右分栏设计说明

## 📋 设计概述

**更新日期**: 2025年10月13日  
**设计风格**: 左右分栏轮播卡片  
**适用页面**: `/yunyang` - 场景化应用探索区块

---

## 🎨 设计布局

### 桌面端布局
```
┌──────────────────────────────────────────────────────────┐
│  ←                     轮播容器                        →  │
│  ┌────────────────────────────────────────────────────┐  │
│  │                                                    │  │
│  │  ┌─────────────────────┐    ┌───────────────┐    │  │
│  │  │  🎁                 │    │               │    │  │
│  │  │  私房好礼           │    │   背景图片    │    │  │
│  │  │                     │    │   或插画      │    │  │
│  │  │  传统礼物千篇一律？ │    │               │    │  │
│  │  │                     │    │               │    │  │
│  │  │  ┌─ 💡 定制方案 ──┐│    │               │    │  │
│  │  │  │送的不是茶，而是│    │               │    │  │
│  │  │  │一个完整的故事  │    │               │    │  │
│  │  │  └────────────────┘│    │               │    │  │
│  │  │                     │    │               │    │  │
│  │  │  ✨ 核心价值       │    │               │    │  │
│  │  │  ━━━━━━━━         │    │               │    │  │
│  │  │  🎯 有面子         │    │               │    │  │
│  │  │  📱 走心独一份     │    │               │    │  │
│  │  │  💝 记忆点长久     │    │               │    │  │
│  │  │                     │    │               │    │  │
│  │  └─────────────────────┘    └───────────────┘    │  │
│  │                                                    │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
│              ━━━━  ━  ━  (指示器)                       │
└──────────────────────────────────────────────────────────┘
```

### 移动端布局
```
┌──────────────────────┐
│   🎁                 │
│   私房好礼           │
│                      │
│   传统礼物千篇一律？ │
│                      │
│   ┌─ 💡 定制方案 ──┐ │
│   │送的不是茶，而是│ │
│   │一个完整的故事  │ │
│   └────────────────┘ │
│                      │
│   ✨ 核心价值        │
│   🎯 有面子          │
│   📱 走心独一份      │
│                      │
│  ┌────────────────┐  │
│  │                │  │
│  │   背景图片     │  │
│  │                │  │
│  └────────────────┘  │
│                      │
│    ━━━━  ━  ━       │
└──────────────────────┘
```

---

## ✨ 功能特性

### 1. 轮播控制
- **左右箭头按钮** (仅桌面端显示)
  - 圆形白色按钮 + 阴影
  - Hover时放大效果
  - 点击切换上/下一张

- **拖拽切换**
  - 支持鼠标拖拽
  - 支持触摸滑动
  - 超过阈值自动切换

- **底部指示器**
  - 胶囊式设计
  - 当前项橙色加长
  - 点击直接跳转

### 2. 内容布局

#### 左侧内容区
1. **场景标题**
   - 大号Emoji图标
   - 场景名称
   
2. **痛点描述**
   - 简洁文字
   - 引起共鸣

3. **定制方案**（高亮卡片）
   - 橙色渐变背景
   - 左侧橙色边框
   - 💡 图标标识
   - 加粗文字

4. **核心价值**
   - ✨ 标题
   - 分隔线
   - 图标 + 文字列表

#### 右侧图片区
- **有图片时**: 显示背景图
- **无图片时**: 显示占位渐变背景 + 淡化图标

### 3. 响应式设计

**桌面端 (≥768px)**
- 左右分栏布局
- 左侧内容 + 右侧图片
- 显示左右箭头
- 图片宽度 320-384px

**移动端 (<768px)**
- 上下分栏布局
- 上方内容 + 下方图片
- 隐藏左右箭头
- 图片高度 256px

---

## 🎯 交互细节

### 切换动画
- **过渡时间**: 500ms
- **缓动函数**: ease-out
- **拖拽阈值**: 100px

### Hover效果
- **箭头按钮**: 放大1.1倍 + 阴影加深
- **指示器**: 颜色加深

### 拖拽体验
- 实时跟随手指/鼠标
- 超过阈值自动切换
- 未超过阈值回弹

---

## 📊 数据格式

### 推荐格式（新）
```json
{
  "id": "1",
  "title": "私房好礼",
  "icon": "🎁",
  "pain_point": "传统礼物千篇一律，缺乏心意",
  "solution": "送的不是茶，而是一个完整的故事体系。以你的姓氏命名专属地块，配上独有的定制包装，再附上一个扫码即可进入的、讲述完整生长故事的专属"数字领地"",
  "background_image": "/images/scenarios/gift.jpg",
  "core_values": [
    {
      "icon": "🎯",
      "title": "有面子，显品味",
      "description": "高端定制礼品"
    },
    {
      "icon": "📱",
      "title": "绝对走心，独一份",
      "description": "专属数字领地"
    },
    {
      "icon": "💝",
      "title": "记忆点长久，"看得见"的心意",
      "description": "持续互动体验"
    }
  ]
}
```

### 兼容格式（旧）
```json
{
  "id": "1",
  "title": "私房好礼",
  "content": "痛点：传统礼物千篇一律\n方案：送的不是茶，而是一个完整的故事体系\n价值：有面子，显品味\n价值：绝对走心，独一份\n价值：记忆点长久"
}
```

组件会自动识别并解析旧格式数据。

---

## 🎨 样式细节

### 颜色方案
- **背景**: 白色渐变到浅灰 `from-white to-stone-50`
- **方案卡片**: 橙色渐变 `from-orange-50 to-amber-50`
- **方案边框**: 橙色 `#F59E0B`
- **指示器**: 橙色 `#F59E0B`
- **箭头**: 灰色 `text-stone-600`

### 圆角和阴影
- **容器圆角**: `rounded-2xl` (16px)
- **方案卡片**: `rounded-xl` (12px)
- **图片圆角**: `rounded-xl` (12px)
- **容器阴影**: `shadow-xl`
- **箭头阴影**: `shadow-lg`

### 间距
- **容器内边距**: 
  - 移动端: `p-6` (24px)
  - 桌面端: `p-10` (40px)
- **左右区域间距**: 
  - 移动端: `gap-6` (24px)
  - 桌面端: `gap-10` (40px)
- **内容区间距**: `space-y-5` (20px)

---

## 🔧 技术实现

### 状态管理
```typescript
const [currentIndex, setCurrentIndex] = useState(0);  // 当前索引
const [isDragging, setIsDragging] = useState(false);  // 拖拽状态
const [startX, setStartX] = useState(0);              // 起始位置
const [translateX, setTranslateX] = useState(0);      // 偏移量
```

### 核心逻辑
```typescript
// 计算transform偏移
transform: `translateX(calc(-${currentIndex * 100}% + ${translateX}px))`

// 拖拽阈值判断
if (Math.abs(translateX) > 100) {
  // 切换场景
}
```

### 数据规范化
自动将新旧格式统一转换为标准格式：
- 提取痛点、方案、核心价值
- 自动匹配场景图标
- 兼容缺失字段

---

## 📱 使用说明

### 查看效果
```bash
# 1. 启动开发服务器
npm run dev

# 2. 访问页面
http://localhost:3000/yunyang

# 3. 切换到"私人定制"或"企业领养"标签

# 4. 滚动到"场景化应用探索"区块
```

### 操作方式
- **桌面端**: 点击左右箭头 / 拖拽 / 点击指示器
- **移动端**: 触摸滑动 / 点击指示器

---

## ✅ 测试清单

### 显示测试
- [ ] 左右分栏布局正常（桌面端）
- [ ] 上下分栏布局正常（移动端）
- [ ] 场景图标显示正常
- [ ] 痛点文字显示正常
- [ ] 定制方案卡片显示正常（橙色背景）
- [ ] 核心价值列表显示正常
- [ ] 背景图片显示正常
- [ ] 无图片时占位符显示正常

### 交互测试
- [ ] 点击左箭头切换到上一张
- [ ] 点击右箭头切换到下一张
- [ ] 鼠标拖拽切换正常
- [ ] 触摸滑动切换正常
- [ ] 点击指示器跳转正常
- [ ] 循环播放正常（最后一张 → 第一张）

### 响应式测试
- [ ] 桌面端显示左右箭头
- [ ] 移动端隐藏左右箭头
- [ ] 布局自动切换（左右 ↔ 上下）
- [ ] 图片尺寸自适应

### 动画测试
- [ ] 切换动画流畅（500ms）
- [ ] 拖拽跟随手指/鼠标
- [ ] 回弹动画正常
- [ ] 箭头hover效果正常

---

## 🎯 优化建议

### 已实现 ✅
- ✅ 左右分栏布局
- ✅ 轮播切换功能
- ✅ 拖拽/触摸支持
- ✅ 响应式适配
- ✅ 数据兼容性
- ✅ 图片占位符

### 可选优化 💡
- [ ] 添加自动播放（可选）
- [ ] 添加键盘导航（左右键）
- [ ] 添加切换音效
- [ ] 添加进度条
- [ ] 支持视频背景
- [ ] 添加缩放动画

---

## 📝 代码示例

### 完整使用
```tsx
import ScenarioCarousel from '@/app/yunyang/components/ScenarioCarousel';

// 在页面中使用
<section>
  <h3 className="text-3xl font-bold text-center mb-12">
    场景化应用探索
  </h3>
  <ScenarioCarousel scenarios={scenarios} />
</section>
```

### 测试数据
```typescript
const testScenarios = [
  {
    id: "1",
    title: "私房好礼",
    icon: "🎁",
    pain_point: "传统礼物千篇一律，缺乏心意",
    solution: "送的不是茶，而是一个完整的故事体系。以你的姓氏命名专属地块，配上独有的定制包装，再附上一个扫码即可进入的、讲述完整生长故事的专属"数字领地"",
    background_image: "/images/gift.jpg",
    core_values: [
      { icon: "🎯", title: "有面子，显品味" },
      { icon: "📱", title: "绝对走心，独一份" },
      { icon: "💝", title: "记忆点长久" }
    ]
  }
];
```

---

## 🐛 故障排除

### 问题1: 轮播不切换
**原因**: 场景数据为空  
**解决**: 检查`scenarios`数组是否有数据

### 问题2: 图片不显示
**原因**: 图片路径错误  
**解决**: 检查`background_image`路径是否正确，或留空使用占位符

### 问题3: 拖拽不流畅
**原因**: 设备性能问题  
**解决**: 已使用CSS transform优化，一般设备无此问题

### 问题4: 移动端布局异常
**原因**: Tailwind断点配置  
**解决**: 确保使用`md:`前缀的响应式类名

---

## 📚 相关文档

- **组件文件**: `app/yunyang/components/ScenarioCarousel.tsx`
- **使用位置**: `app/yunyang/components/PrivatePlan.tsx`
- **原始需求**: `私人定制场景化应用-前端实现指南.md`

---

## 🎉 总结

新的场景轮播设计特点：

✅ **左右分栏布局** - 内容与图片并排展示  
✅ **轮播切换** - 支持多种切换方式  
✅ **响应式设计** - 桌面/移动自动适配  
✅ **数据兼容** - 支持新旧格式  
✅ **交互流畅** - 拖拽、动画、指示器  
✅ **视觉美观** - 渐变、阴影、圆角

现在访问 `/yunyang` 页面，即可查看全新的左右分栏轮播效果！

---

**文档版本**: v1.0  
**创建日期**: 2025年10月13日  
**状态**: ✅ 已完成并可使用

