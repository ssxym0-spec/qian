# 卡片激活状态快速测试指南

## 🚀 快速开始

### 1. 启动开发服务器

```bash
npm run dev
```

访问：http://localhost:3000

## ✅ 测试场景

### 场景 1: 首页品类卡片

**测试步骤**：
1. 打开首页（http://localhost:3000）
2. 向下滚动到"四季甄选 · 品类一览"区域
3. 点击任意品类卡片（如"明前茶"）
4. **预期结果**：
   - ✨ 被点击的卡片会出现**脉动橙色实线边框**
   - 🧡 边框颜色为橙色（orange-500），与底部导航栏激活色一致
   - 💫 边框呈现柔和的呼吸效果：半透明 ⇄ 不透明
   - 🌟 边框发光强度同步变化：无光 → 柔和橙色光晕 → 无光
   - ⏱️ 约4秒完成一次呼吸循环（吸气-呼气），舒缓自然
   - 📍 无旋转动画，视觉干扰最小
5. 点击另一张卡片（如"雨前茶"）
6. **预期结果**：
   - ❌ 前一张卡片（明前茶）的边框消失
   - ✅ 新卡片（雨前茶）出现脉动边框

**状态保持测试**：
1. 点击一张品类卡片，看到脉动边框
2. 点击卡片进入溯源页面
3. 点击浏览器后退按钮，返回首页
4. **预期结果**：
   - ✅ 之前点击的卡片仍然保持脉动边框
   - 💾 状态被成功保存

---

### 场景 2: 溯源批次卡片

**测试步骤**：
1. 访问任意品类的溯源页面（如：http://localhost:3000/suyuan/mingqian）
2. 页面显示多个批次卡片
3. 点击任意批次卡片
4. **预期结果**：
   - ✨ 被点击的批次卡片出现脉动边框
5. 点击另一张批次卡片
6. **预期结果**：
   - ❌ 前一张卡片边框消失
   - ✅ 新卡片出现脉动边框

**状态保持测试**：
1. 点击一张批次卡片
2. 点击卡片进入批次详情页
3. 返回溯源页面
4. **预期结果**：
   - ✅ 之前点击的批次卡片仍保持脉动边框

---

### 场景 3: 生长日记卡片

**测试步骤**：
1. 访问生长日记页面（http://localhost:3000/shengzhang）
2. 选择任意月份，显示每日日志卡片列表
3. 点击任意日志卡片
4. **预期结果**：
   - ✨ 被点击的日志卡片出现脉动边框
5. 点击另一张日志卡片
6. **预期结果**：
   - ❌ 前一张卡片边框消失
   - ✅ 新卡片出现脉动边框

**状态保持测试**：
1. 点击一张日志卡片
2. 打开详情面板
3. 关闭详情面板
4. **预期结果**：
   - ✅ 点击的卡片仍保持脉动边框

---

### 场景 4: 列表隔离测试

**目的**：验证不同列表的激活状态互不干扰

**测试步骤**：
1. 首页点击"明前茶"卡片（激活脉动边框）
2. 进入溯源页面，点击一个批次卡片（激活脉动边框）
3. 进入生长日记页面，点击一个日志卡片（激活脉动边框）
4. **预期结果**：
   - 返回首页：明前茶卡片仍有脉动边框 ✅
   - 返回溯源页：批次卡片仍有脉动边框 ✅
   - 返回生长页：日志卡片仍有脉动边框 ✅
   - 三个列表的激活状态**互不影响** 🎯

---

## 🎨 视觉效果检查清单

### 边框样式
- [ ] 边框宽度为 2px
- [ ] 默认状态：边框透明
- [ ] 激活状态：边框显示橙色实线（orange-500, #f97316）
- [ ] 与底部导航栏激活色保持一致
- [ ] 无旋转动画（静态边框）
- [ ] 带呼吸式发光效果

### 动画效果
- [ ] 呼吸动画平滑柔和（无卡顿）
- [ ] 约4秒完成一次呼吸循环
- [ ] 边框透明度和发光强度同步变化
- [ ] 使用 ease-in-out 缓动，自然优雅

### 呼吸效果
观察边框应呈现如下循环：
1. 💨 **吸气开始**：边框半透明橙色（50%），无光晕
2. 💫 **吸气中**：边框逐渐变亮，橙色光晕逐渐增强
3. 🧡 **吸气顶点**：边框完全不透明橙色（100%），橙色光晕最强（12px）
4. 💫 **呼气中**：边框逐渐变淡，光晕逐渐减弱
5. 💨 **呼气结束**：回到半透明，光晕消失
6. 🔄 循环往复

### 布局检查
- [ ] 激活时卡片不抖动（边框已预留空间）
- [ ] 边框贴合卡片圆角
- [ ] 卡片内容不受边框影响
- [ ] hover 效果正常工作

---

## 🔍 浏览器开发者工具检查

### localStorage 检查

1. 打开浏览器开发者工具（F12）
2. 切换到 **Application** 标签
3. 左侧选择 **Local Storage** → **http://localhost:3000**
4. 点击不同的卡片后，查看以下键值：

| Key | Value | 说明 |
|-----|-------|------|
| `active-card-category-cards` | `category-0` | 首页品类卡片激活状态 |
| `active-card-batch-list` | `批次ID` | 溯源批次卡片激活状态 |
| `active-card-daily-logs` | `日期-索引` | 生长日志卡片激活状态 |

**验证**：
- ✅ 点击卡片后，对应的 key 出现/更新
- ✅ 刷新页面后，key 仍然存在
- ✅ 卡片边框根据 localStorage 自动恢复

### CSS 类名检查

**未激活的卡片**：
```html
<div class="... active-card-border-default">
```

**激活的卡片**：
```html
<div class="... active-card-border">
```

### 动画检查

1. 选中激活的卡片元素
2. 在 **Elements** 面板查看 Styles
3. 应该看到：
```css
.active-card-border {
  animation: gentle-pulse 4s ease-in-out infinite;
  border: 2px solid rgba(249, 115, 22, 0.5); /* orange-500 */
}
```

---

## 🐛 常见问题排查

### 问题：点击卡片没有出现边框

**可能原因**：
1. CSS 未正确加载
2. Hook 未正确导入

**排查步骤**：
1. 检查浏览器控制台是否有错误
2. 确认 `app/globals.css` 包含边框动画定义
3. 确认组件正确导入 `useActiveCard`

### 问题：边框不呼吸（静态的）

**可能原因**：
1. CSS 动画被禁用
2. 浏览器设置了"减少动画"

**排查步骤**：
1. 检查浏览器是否启用了"减少动画"设置（无障碍功能）
2. 确认 CSS 动画在其他地方能正常工作

### 问题：切换卡片时，前一个边框没消失

**可能原因**：
- 唯一性逻辑未正确实现

**排查步骤**：
1. 检查 `useActiveCard` 的 `listKey` 是否正确
2. 确认 `setActiveCard` 被正确调用

### 问题：返回页面后，激活状态丢失

**可能原因**：
- localStorage 未正确保存

**排查步骤**：
1. 检查浏览器控制台是否有 localStorage 相关错误
2. 确认浏览器允许使用 localStorage（非隐私模式）

---

## 📊 性能检查

### 使用 Chrome DevTools Performance

1. 打开开发者工具（F12）
2. 切换到 **Performance** 标签
3. 点击录制按钮
4. 与卡片交互（点击、滚动）
5. 停止录制
6. 查看结果：
   - ✅ FPS 应稳定在 60
   - ✅ 无长任务（Long Task）
   - ✅ 动画在 Compositor 线程执行

---

## 🎉 测试通过标准

所有测试通过的标志：

✅ 点击卡片后，橙色边框立即出现  
✅ 边框颜色与底部导航栏激活色一致（orange-500）  
✅ 边框呈现柔和的呼吸效果，4秒一个循环  
✅ 边框透明度和发光强度同步变化  
✅ 同时只有一张卡片有边框  
✅ 从详情返回后，边框状态保持  
✅ 不同列表的状态互不干扰  
✅ localStorage 正确保存状态  
✅ 无卡顿，性能流畅  
✅ 无控制台错误  
✅ 视觉效果低调优雅，品牌统一性强  

---

## 📝 反馈建议

如果测试过程中发现问题，请记录：
1. 问题现象（截图/录屏更佳）
2. 复现步骤
3. 浏览器版本
4. 控制台错误信息

祝测试顺利！🎊

