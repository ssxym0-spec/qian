# 企业领养场景显示问题 - 快速测试指南

## 🎯 测试目的
验证企业领养的"核心应用场景"是否能正确显示后端数据

---

## ⚡ 快速测试步骤

### 1️⃣ 启动开发服务器（如未启动）

```bash
npm run dev
```

等待服务器启动完成，看到：
```
✓ Ready in Xms
```

---

### 2️⃣ 打开浏览器访问

访问地址：
```
http://localhost:3000/yunyang
```

---

### 3️⃣ 切换到企业领养标签

在页面顶部的导航栏中，点击 **"企业领养"** 标签

---

### 4️⃣ 查看核心应用场景部分

向下滚动到 **"核心应用场景"** 或 **"X大核心应用场景"** 部分

---

## ✅ 预期结果

### 正常情况（修复成功）

**视觉表现：**
- 📱 看到场景轮播卡片
- 🎯 每个卡片包含：
  - 场景标题
  - 场景图标或背景图
  - 痛点描述（红色文字）
  - 解决方案（方框内）
  - 核心价值点列表
- ◀️▶️ 底部有轮播指示器（胶囊状）
- 🔄 可以左右滑动切换场景

**控制台输出（按F12打开）：**

浏览器控制台应显示：
```
=== EnterprisePlan 调试信息 ===
planData: {type: 'enterprise', ...}
scenario_applications: [...] 或 undefined
use_scenarios: [...] 或 undefined
转换后的 scenarios: Array(X)
scenarios 长度: X
使用的字段: scenario_applications 或 use_scenarios
```

其中 `scenarios 长度` 应该 > 0

---

### 异常情况（问题仍存在）

**视觉表现：**
- 🚫 看不到任何场景卡片
- 或只看到一个默认场景："场景一：顶级客户关系'破冰与升温'"

**控制台输出：**
```
scenarios 长度: 1
```
且 `scenario_applications` 和 `use_scenarios` 都是 `undefined`

---

## 🔍 深度检查

### 检查1：查看API响应

在浏览器中打开新标签页，访问：
```
http://localhost:3000/api/public/adoption-plans
```

**查找关键信息：**

按 `Ctrl+F` 搜索 `"enterprise"`，找到企业领养部分

**正常情况应包含：**
```json
{
  "success": true,
  "data": {
    "enterprise": {
      "type": "enterprise",
      "scenario_applications": [...],  // 新字段
      // 或
      "use_scenarios": [...],          // 旧字段
      "marketing_header": {...},
      "customer_cases": [...],
      ...
    }
  }
}
```

**异常情况：**
- `enterprise` 为 `null`
- 既没有 `scenario_applications` 也没有 `use_scenarios`
- `scenario_applications` 或 `use_scenarios` 是空数组 `[]`

---

### 检查2：查看服务器端日志

在运行 `npm run dev` 的终端窗口中，查找：

```
=== 服务器端调试信息 ===
API 响应成功
企业领养数据存在: true
企业领养场景数据: [...]
企业领养场景数量: X
```

**正常：** `企业领养场景数量` 应该 > 0  
**异常：** `企业领养场景数量: 0`

---

## 🛠️ 问题排查

### 问题A：API返回为空或null

**原因：** 后端数据库中没有企业领养方案数据

**解决方法：**
1. 访问后台管理页面（如果有）
2. 进入"云养茶园管理"或"企业领养管理"
3. 添加场景数据
4. 保存并刷新前端页面

---

### 问题B：API有数据，但前端不显示

**原因：** 字段名不匹配

**检查步骤：**
1. 查看API响应，记录实际的字段名（可能既不是 `scenario_applications` 也不是 `use_scenarios`）
2. 查看浏览器控制台的 `planData` 日志，确认收到的数据结构
3. 如果字段名不同，需要更新 `EnterprisePlan.tsx` 的兼容逻辑

**临时测试：**
在浏览器控制台输入：
```javascript
// 手动检查数据
console.log('企业领养数据:', window.__NEXT_DATA__);
```

---

### 问题C：显示默认数据（"场景一：顶级客户关系..."）

**原因：** 后端场景数据为空数组

**检查API响应：**
```json
{
  "enterprise": {
    "scenario_applications": [],  // 空数组
    "use_scenarios": []           // 空数组
  }
}
```

**解决方法：** 在后台管理系统中添加场景数据

---

## 📊 测试检查清单

复制下面的清单，逐项验证：

- [ ] 开发服务器成功启动（`npm run dev`）
- [ ] 能访问 `http://localhost:3000/yunyang`
- [ ] 能看到"私人定制｜企业领养｜B端合作"三个标签
- [ ] 点击"企业领养"标签后页面切换
- [ ] 能看到"核心应用场景"标题（或"X大核心应用场景"）
- [ ] 看到至少一个场景轮播卡片
- [ ] 卡片包含标题、图标、痛点、方案、价值点
- [ ] 轮播指示器正常显示
- [ ] 可以左右滑动切换场景
- [ ] 浏览器控制台显示 `scenarios 长度: X`（X > 0）
- [ ] 浏览器控制台显示使用的字段（scenario_applications 或 use_scenarios）
- [ ] API `/api/public/adoption-plans` 返回企业领养数据
- [ ] 服务器终端显示场景数量 > 0

---

## 🆘 获取帮助

如果以上步骤都无法解决问题，请收集以下信息：

### 1. 浏览器控制台完整日志

```
右键点击控制台 → "Save as..." → 保存为 console.log
```

### 2. API响应内容

访问 `http://localhost:3000/api/public/adoption-plans`，复制完整的JSON响应

### 3. 服务器终端输出

复制运行 `npm run dev` 的终端中的所有输出

### 4. 屏幕截图

- 企业领养页面的截图（包含核心应用场景部分）
- 浏览器控制台截图

---

## 💡 成功标志

**最终验证：** 如果你能在企业领养页面看到多个场景卡片，每个卡片都有完整的内容（痛点、方案、价值点），并且可以左右滑动浏览，那么修复就是**成功的** ✅

---

**测试文档版本**: v1.0  
**最后更新**: 2025年10月26日  
**适用修复**: 企业领养场景显示问题修复

