# 徽章呼吸动画说明

## 🏅 功能概述

为批次追溯页面的等级徽章添加优雅的呼吸动画效果，突出显示茶叶批次的等级标识，吸引用户注意力。

---

## 🎨 动画设计

### 动画效果
**名称**：`badge-breathe`

**动画参数**：
- **周期**：5秒（`5s`）
- **缓动函数**：`ease-in-out`（平滑进出）
- **循环**：无限循环（`infinite`）

### 动画关键帧

```css
@keyframes badge-breathe {
  0%, 100% {
    transform: rotate(12deg) scale(1);
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
  }
  50% {
    transform: rotate(12deg) scale(1.08);
    filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.2));
  }
}
```

### 动画说明

#### 初始/结束状态（0%, 100%）
- **旋转**：`rotate(12deg)` - 保持12度倾斜
- **缩放**：`scale(1)` - 正常大小
- **阴影**：轻微阴影 `drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))`

#### 中间状态（50%）
- **旋转**：`rotate(12deg)` - 保持12度倾斜
- **缩放**：`scale(1.08)` - 放大8%
- **阴影**：增强阴影 `drop-shadow(0 8px 12px rgba(0, 0, 0, 0.2))`

### 视觉效果
- 📈 **缩放变化**：徽章在1倍到1.08倍之间循环
- 💫 **阴影变化**：阴影从浅到深，营造"呼吸"的立体感
- 🔄 **保持倾斜**：始终保持12度倾斜角度，维持设计风格

---

## 📋 应用位置

### 1. 徽章图片（主要显示方式）

**文件**：`app/suyuan/components/BatchCard.tsx`

**位置**：第122-140行

**修改前**：
```tsx
<div 
  className="w-16 h-16 transform rotate-12 cursor-pointer hover:scale-110 transition-transform duration-300"
  onClick={handleBadgeClick}
>
```

**修改后**：
```tsx
<div 
  className="w-16 h-16 cursor-pointer hover:scale-110 transition-transform duration-300 badge-breathe"
  onClick={handleBadgeClick}
>
```

**变化**：
- ✅ 移除了静态的 `transform rotate-12`（由动画接管）
- ✅ 添加了 `badge-breathe` 类

### 2. 文字徽章（回退方案）

**位置**：第142-154行

**修改前**：
```tsx
<div className={`
  ${gradeConfig.color} 
  text-white font-bold text-lg
  w-14 h-14 rounded-full
  flex items-center justify-center
  shadow-lg
  transform rotate-12
  border-2 border-white
`}>
```

**修改后**：
```tsx
<div className={`
  ${gradeConfig.color} 
  text-white font-bold text-lg
  w-14 h-14 rounded-full
  flex items-center justify-center
  shadow-lg
  border-2 border-white
  badge-breathe
`}>
```

**变化**：
- ✅ 移除了静态的 `transform rotate-12`（由动画接管）
- ✅ 添加了 `badge-breathe` 类

---

## 🎯 设计理念

### 1. 突出等级标识
- 呼吸动画吸引用户视线
- 强调茶叶等级的重要性
- 与静态卡片形成对比

### 2. 优雅不喧宾夺主
- 5秒周期，节奏从容优雅
- 8%的缩放变化，温和不夸张
- 配合阴影变化，增强立体感

### 3. 保持设计一致性
- 保持12度倾斜角度
- 与悬停效果（`hover:scale-110`）协调
- 符合整体的茶文化美学

### 4. 引导交互
- 动态效果暗示可点击
- 与点击后的徽章大图模态框衔接
- 提升用户探索意愿

---

## 🔄 与其他动画的协调

### 页面现有动画

| 动画 | 元素 | 周期 | 效果 |
|------|------|------|------|
| `badge-breathe` | 等级徽章 | **5秒** | 缩放+阴影 |
| `gentle-pulse` | 激活卡片边框 | 4秒 | 呼吸发光 |
| `arrow-breathe` | 右箭头 | 2秒 | 透明度+位移 |

### 协调性考虑
- ✅ **不同周期**：避免视觉上的同步感，更自然
- ✅ **不同效果**：各有特色，不会混淆
- ✅ **视觉层次**：
  - 徽章：5秒，最慢，焦点层（最优雅）
  - 边框：4秒，中等，背景层
  - 箭头：2秒，最快，引导层

---

## 💡 用户体验

### 正面效果
1. ✅ **吸引注意**：动态徽章立即抓住用户眼球
2. ✅ **传达品质**：等级标识的动态呈现强化品质感知
3. ✅ **引导点击**：暗示徽章可交互（点击查看大图）
4. ✅ **增强记忆**：动态元素更容易被记住

### 性能考虑
- ✅ **纯 CSS 动画**：GPU 加速，性能优秀
- ✅ **简单变换**：只涉及 transform 和 filter
- ✅ **不影响布局**：使用 transform，不触发重排

---

## 🧪 测试验证

### 测试步骤
1. 打开溯源批次列表页面
2. 观察批次卡片右上角的等级徽章
3. 确认徽章有柔和的缩放呼吸效果
4. 悬停在徽章上，确认 hover 效果正常
5. 点击徽章，确认模态框正常弹出

### 预期结果
- ✅ 徽章以5秒周期优雅呼吸
- ✅ 保持12度倾斜角度
- ✅ 阴影随缩放变化
- ✅ 悬停时放大到1.1倍（叠加效果）
- ✅ 点击后正常显示大图
- ✅ 两种徽章（图片/文字）都有动画

---

## 📝 修改记录

### 2025年10月9日 - 初次实现

**新增文件**：
- `app/globals.css` - 添加 `@keyframes badge-breathe` 和 `.badge-breathe` 类

**修改文件**：
- `app/suyuan/components/BatchCard.tsx` - 为徽章图片和文字徽章添加 `badge-breathe` 类

**设计参数**：
- 周期：5秒（2025.10.9 调整：3秒 → 5秒，更优雅从容）
- 缩放范围：1.0 ~ 1.08
- 阴影变化：浅 → 深

---

## 🔮 未来优化方向

### 可选增强
1. **分级动画强度**：
   - 臻级：更强的呼吸效果
   - 匠级：中等强度
   - 优级：轻微效果

2. **颜色变化**：
   - 配合呼吸添加微妙的亮度变化
   - 增强视觉吸引力

3. **悬停暂停**：
   - 悬停时暂停动画
   - 让用户更容易点击

4. **首次加载特效**：
   - 页面加载时的入场动画
   - 配合淡入效果

### 性能监控
- 监控动画性能影响
- 根据设备性能调整（低端设备减弱或关闭）
- 尊重用户的 `prefers-reduced-motion` 设置

---

## 🎨 相关文档
- 卡片激活状态动画：`卡片抖动问题修复说明.md`
- 箭头呼吸动画：`卡片箭头呼吸动画说明.md`
- Tailwind 动画文档：https://tailwindcss.com/docs/animation

